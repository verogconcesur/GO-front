<div class="attr-dialog">
    <div class="attr-dialog__filter">
        <div class="attr-dialog__filter__form">
            <form class="smaller-mat-form-fields" fxLayout="row" fxLayoutAlign="end center" (ngSubmit)="filter()">
                <mat-form-field appearance="outline" class="smaller-mat-form-fields__no-margin">
                    <input
                        type="text"
                        matInput
                        [placeholder]="labels.filter | translate"
                        [formControl]="filterTextSearchControl"
                        (keyup.enter)="filter()"
                        (click)="$event.stopPropagation()"
                    />
                </mat-form-field>
            </form>
        </div>
        <div class="attr-dialog__content">
            <p class="attr-dialog__content__no-data" *ngIf="!dataSource.data?.length">{{ labels.noData | translate }}</p>
            <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="attr-tree">
                <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle (click)="selectNode(node)">
                    <button mat-button>
                        <div
                            appHighlight
                            [searchedWords]="searchedWords$ | async"
                            [text]="node.name"
                            classToApply="selected"
                        ></div>
                        <mat-icon *ngIf="!checkBoxSelection" [ngClass]="{ arrow: checkBoxSelection }"
                            >keyboard_arrow_right</mat-icon
                        >
                        <mat-icon *ngIf="checkBoxSelection && node.selected">check_box</mat-icon>
                        <mat-icon *ngIf="checkBoxSelection && !node.selected">check_box_outline_blank</mat-icon>
                    </button>
                </mat-tree-node>
                <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                    <div class="mat-tree-node mat-tree-group-node">
                        <button mat-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name">
                            <div
                                appHighlight
                                [searchedWords]="searchedWords$ | async"
                                [text]="node.name"
                                classToApply="selected"
                            ></div>
                            <mat-icon class="mat-icon-rtl-mirror">
                                {{ treeControl.isExpanded(node) ? "expand_more" : "chevron_right" }}
                            </mat-icon>
                        </button>
                    </div>
                    <div [class.attr-tree-invisible]="!treeControl.isExpanded(node)" role="group">
                        <ng-container matTreeNodeOutlet></ng-container>
                    </div>
                </mat-nested-tree-node>
            </mat-tree>
        </div>
    </div>
</div>
