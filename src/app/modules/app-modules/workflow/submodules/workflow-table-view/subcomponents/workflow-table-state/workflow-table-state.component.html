<div class="list-view-state" fxLayout="column">
    <div class="list-view-state__header" fxLayout="row" fxLayoutAlign="space-between end">
        <div class="list-view-state__header__title" fxLayout="row" fxLayoutAlign="start end">
            <div class="list-view-state__header__title__label">
                <span>{{ wState.name }}</span>
            </div>
            <div class="list-view-state__header__title__info" fxLayout="row">
                <span>{{ labels.nCards | translate : { num: wState.cardCount } }}</span>
                <span *ngIf="wState.front">{{ labels.workers | translate : { num: wState.userCount } }}</span>
            </div>
        </div>
        <div class="list-view-state__header__buttons" fxLayout="row" fxLayoutAlign="start end">
            <button class="list-view-state__header__buttons__button" mat-stroked-button (click)="accordion.openAll()">
                {{ labels.expand | translate }}
            </button>
            <button class="list-view-state__header__buttons__button" mat-stroked-button (click)="accordion.closeAll()">
                {{ labels.collapse | translate }}
            </button>
        </div>
    </div>
    <div class="list-view-state__substate">
        <mat-accordion multi>
            <mat-expansion-panel *ngFor="let substate of wState.workflowSubstates">
                <mat-expansion-panel-header>
                    <mat-panel-title>{{ substate.name }}</mat-panel-title>
                    <mat-panel-description>
                        <span>{{ substate.cards.length }}</span>
                    </mat-panel-description>
                </mat-expansion-panel-header>

                <ng-template matExpansionPanelContent>
                    <app-workflow-table-substate
                        [workflow]="workflow"
                        [wState]="wState"
                        [wSubstate]="substate"
                    ></app-workflow-table-substate>
                </ng-template>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</div>
