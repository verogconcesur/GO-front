<div *ngIf="form && originalData" class="cards-limit-container" [formGroup]="form">
    <div class="cards-limit-container__section" fxLayout="row wrap">
        <div class="cards-limit-container__section__title">
            <h1>{{ labels.cardsLimit | translate }}</h1>
        </div>
    </div>
    <div class="cards-limit-container__section smaller-mat-form-fields">
        <mat-checkbox formControlName="cardsLimit">{{ labels.cardsLimitCheck | translate }}</mat-checkbox>
    </div>
    <div
        class="cards-limit-container__section smaller-mat-form-fields"
        fxLayout="row wrap"
        fxLayoutAlign="start baseline"
        *ngIf="form.controls.cardsLimit.value"
    >
        <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>{{ labels.initTime | translate }}</mat-label>
            <input matInput type="number" min="0" max="23" formControlName="initTime" />
            <mat-error class="cards-limit__error" *ngIf="form.controls.initTime.invalid">
                {{ labels.required | translate }} ({{ labels.valueBetween | translate : { min: 0, max: 23 } }})
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>{{ labels.endTime | translate }}</mat-label>
            <input matInput type="number" min="0" max="23" formControlName="endTime" />
            <mat-error class="cards-limit__error" *ngIf="form.controls.endTime.invalid">
                {{ labels.required | translate }} ({{ labels.valueBetween | translate : { min: 0, max: 23 } }})
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>{{ labels.numCardsByHour | translate }}</mat-label>
            <input matInput type="number" formControlName="numCardsByHour" />
            <mat-error class="cards-limit__error" *ngIf="form.controls.numCardsByHour.invalid">
                {{ labels.required | translate }}
            </mat-error>
        </mat-form-field>
    </div>
    <div
        class="cards-limit-container__section smaller-mat-form-fields"
        fxLayout="row wrap"
        fxLayoutAlign="start baseline"
        *ngIf="form.controls.cardsLimit.value"
    >
        <mat-checkbox formControlName="cardsByDayLimit">{{ labels.cardsByDayLimit | translate }}</mat-checkbox>
        <mat-form-field appearance="outline" floatLabel="always" *ngIf="form.controls.cardsByDayLimit.value">
            <mat-label>{{ labels.numCardsByDay | translate }}</mat-label>
            <input matInput type="number" formControlName="numCardsByDay" />
            <mat-error class="cards-limit__error" *ngIf="form.controls.numCardsByDay.invalid">
                {{ labels.required | translate }}
            </mat-error>
        </mat-form-field>
    </div>
    <div class="cards-limit-container__section smaller-mat-form-fields" fxLayout="row wrap" fxLayoutAlign="start baseline">
        <mat-checkbox formControlName="allowMinDaysAdvanceNotice">{{
            labels.allowMinDaysAdvanceNotice | translate
        }}</mat-checkbox>
        <mat-form-field appearance="outline" floatLabel="always" *ngIf="form.controls.allowMinDaysAdvanceNotice.value">
            <mat-label>*{{ labels.minDaysAdvanceNotice | translate }}</mat-label>
            <input matInput type="number" formControlName="minDaysAdvanceNotice" />
            <mat-error class="cards-limit__error" *ngIf="form.controls.minDaysAdvanceNotice.invalid">
                {{ labels.required | translate }}
            </mat-error>
        </mat-form-field>
    </div>
    <div
        class="cards-limit-container__section smaller-mat-form-fields"
        fxLayout="row wrap"
        fxLayoutAlign="start baseline"
        *ngIf="form.controls.cardsLimit.value"
    >
        <mat-checkbox formControlName="allowOverLimit">{{ labels.allowOverLimit | translate }}</mat-checkbox>
        <mat-form-field
            appearance="outline"
            floatLabel="always"
            style="min-width: 350px"
            *ngIf="form.controls.allowOverLimit.value"
        >
            <mat-label
                >*<span *ngIf="form.controls.allowMinDaysAdvanceNotice.value">*</span
                >{{ labels.allowOverLimitRoles | translate }}</mat-label
            >
            <mat-select formControlName="allowOverLimitRoles" multiple>
                <mat-option *ngFor="let rol of workflowUsersRoles" [value]="rol">{{ rol.name }}</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field
            appearance="outline"
            floatLabel="always"
            *ngIf="form.controls.allowOverLimit.value"
            style="min-width: 350px"
        >
            <mat-label>{{ labels.workflowSubstateTargetCardsLimit | translate }}</mat-label>
            <mat-select formControlName="workflowSubstate">
                <mat-option *ngFor="let substate of workflowSubstates" [value]="substate"
                    >{{ substate.workflowState.name }} - {{ substate.name }}</mat-option
                >
            </mat-select>
            <mat-error *ngIf="form.controls.workflowSubstate.invalid">
                <span>{{ labels.required | translate }}</span>
            </mat-error>
        </mat-form-field>
    </div>
    <p class="extra-info" *ngIf="form.controls.allowMinDaysAdvanceNotice.value">
        * {{ labels.minDaysAdvanceNotice | translate }}: {{ labels.minDaysAdvanceNoticeInfo | translate }}
    </p>
    <p class="extra-info" *ngIf="form.controls.allowOverLimit.value">
        *<span *ngIf="form.controls.allowMinDaysAdvanceNotice.value">*</span>{{ labels.allowOverLimitRoles | translate }}:
        {{ labels.allowOverLimitRolesInfo | translate }}
    </p>
</div>
